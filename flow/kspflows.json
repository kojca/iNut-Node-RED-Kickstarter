[
    {
        "id": "6c281c8f.cbebc4",
        "type": "tab",
        "label": "Bảng điều khiển",
        "disabled": false,
        "info": ""
    },
    {
        "id": "8322599d.1d7f58",
        "type": "tab",
        "label": "1 cái inut F4 khác",
        "disabled": false,
        "info": ""
    },
    {
        "id": "45e7dc7b.259814",
        "type": "subflow",
        "name": "Lấy dữ từ iNut",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "fd95dcc.5815c2"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 859.0000343322754,
                "y": 98.00000190734863,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 0
                    }
                ]
            },
            {
                "x": 968.0000343322754,
                "y": 102.00000286102295,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 1
                    }
                ]
            },
            {
                "x": 1048.9999732971191,
                "y": 101.00000381469727,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 2
                    }
                ]
            },
            {
                "x": 1116.9999732971191,
                "y": 112.00000381469727,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 3
                    }
                ]
            },
            {
                "x": 1178.0000820159912,
                "y": 129.0000057220459,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 4
                    }
                ]
            },
            {
                "x": 1216.0000820159912,
                "y": 188.0000057220459,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 5
                    }
                ]
            },
            {
                "x": 1189.0000839233398,
                "y": 263.00000762939453,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 6
                    }
                ]
            },
            {
                "x": 1173.9999742507935,
                "y": 312.00000762939453,
                "wires": [
                    {
                        "id": "af1d97.1a9de268",
                        "port": 7
                    }
                ]
            }
        ],
        "inputLabels": [
            "Nhận đầu vào MQTT IN từ iNut cảm biến"
        ],
        "outputLabels": [
            "Luồng cảm biến 1",
            "Luồng cảm biến 2",
            "Luồng cảm biến 3",
            "Luồng cảm biến 4",
            "Luồng cảm biến 5",
            "Luồng cảm biến 6",
            "Luồng cảm biến 7",
            "Luồng cảm biến 8"
        ]
    },
    {
        "id": "5f4cdaf0.efb204",
        "type": "subflow",
        "name": "Kiểm tra trạng thái kết nối Internet",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "511f63ae.499f8c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 625.0000095367432,
                "y": 120.00000381469727,
                "wires": [
                    {
                        "id": "76c3aba3.f4f414",
                        "port": 0
                    }
                ]
            },
            {
                "x": 625.0000095367432,
                "y": 181.00000190734863,
                "wires": [
                    {
                        "id": "653af8c2.fb0428",
                        "port": 0
                    }
                ]
            }
        ],
        "inputLabels": [
            "Kết quả trả về của iNut cảm biến"
        ],
        "outputLabels": [
            "Thiết bị đang online (dã vào mạng)",
            "Thiết bị đang offline (đã rớt mạng)"
        ]
    },
    {
        "id": "856ec34.e149e4",
        "type": "subflow",
        "name": "Nhiệt độ",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "72c1709a.4c93d"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1169.9999809265137,
                "y": 193.00000190734863,
                "wires": [
                    {
                        "id": "4f09c8ae.69f108",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1288.9999809265137,
                "y": 235.00000190734863,
                "wires": [
                    {
                        "id": "5f24de40.be38f",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1295.9999809265137,
                "y": 298.00000190734863,
                "wires": [
                    {
                        "id": "5f24de40.be38f",
                        "port": 1
                    }
                ]
            }
        ],
        "inputLabels": [
            "Dữ liệu từ iNut luồn số 0"
        ],
        "outputLabels": [
            "Giá trị nhiệt độ (số thực)",
            "Kích ngưỡng cao",
            "Kích ngưỡng thấp"
        ]
    },
    {
        "id": "b88f92a1.61e8d",
        "type": "subflow",
        "name": "Độ ẩm",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "ccf8a5dc.df2428"
                    },
                    {
                        "id": "8f3ae8d2.d4cad8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 878,
                "y": 142,
                "wires": [
                    {
                        "id": "ccf8a5dc.df2428",
                        "port": 0
                    }
                ]
            },
            {
                "x": 878,
                "y": 209,
                "wires": [
                    {
                        "id": "8f3ae8d2.d4cad8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 880,
                "y": 273,
                "wires": [
                    {
                        "id": "8f3ae8d2.d4cad8",
                        "port": 1
                    }
                ]
            }
        ]
    },
    {
        "id": "9d7f68ce.7b1d68",
        "type": "subflow",
        "name": "Lấy dữ liệu iNut DHT22/DHT11",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "3ab880e8.3d67c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 963.0000019073486,
                "y": 275,
                "wires": [
                    {
                        "id": "8de4190e.32c538",
                        "port": 0
                    }
                ]
            },
            {
                "x": 961.0000076293945,
                "y": 321.00000190734863,
                "wires": [
                    {
                        "id": "8de4190e.32c538",
                        "port": 1
                    }
                ]
            }
        ],
        "inputLabels": [
            "[MQTT-in]"
        ],
        "outputLabels": [
            "Dữ liệu nhiệt độ",
            "Dữ liệu độ ẩm"
        ]
    },
    {
        "id": "79f39b07.13eb74",
        "type": "subflow",
        "name": "Lấy dữ liệu iNut i1",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "65964eaa.27d2d"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 960.0000019073486,
                "y": 140,
                "wires": [
                    {
                        "id": "db408f9e.0a9f8",
                        "port": 0
                    }
                ]
            }
        ],
        "inputLabels": [
            "[MQTT-in]"
        ],
        "outputLabels": [
            "Trạng thái relay"
        ]
    },
    {
        "id": "4bc2172f.ccf2f8",
        "type": "subflow",
        "name": "Lấy dữ liệu từ iNut i3/ iNut N3",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "84ba57cc.a11ea8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1009.0000038146973,
                "y": 317,
                "wires": [
                    {
                        "id": "ed0d168.983e6e8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1001.0000057220459,
                "y": 365.00000190734863,
                "wires": [
                    {
                        "id": "ed0d168.983e6e8",
                        "port": 1
                    }
                ]
            },
            {
                "x": 999.0000057220459,
                "y": 415.00000190734863,
                "wires": [
                    {
                        "id": "ed0d168.983e6e8",
                        "port": 2
                    }
                ]
            }
        ],
        "inputLabels": [
            "[MQTT-in]"
        ],
        "outputLabels": [
            "Relay 1/Cảm biến 1",
            "Relay 2/Cảm biến 2",
            "Relay 3/Cảm biến 3"
        ]
    },
    {
        "id": "bf1112b5.a72e9",
        "type": "subflow",
        "name": "Lấy dữ liệu iNut f4 / iNut Door",
        "info": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "4146a446.d2afbc"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 966.0000019073486,
                "y": 208,
                "wires": [
                    {
                        "id": "193e0cd8.65c7e3",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1021.0000019073486,
                "y": 208,
                "wires": [
                    {
                        "id": "193e0cd8.65c7e3",
                        "port": 1
                    }
                ]
            },
            {
                "x": 1076.0000019073486,
                "y": 208,
                "wires": [
                    {
                        "id": "193e0cd8.65c7e3",
                        "port": 2
                    }
                ]
            },
            {
                "x": 1131.0000019073486,
                "y": 208,
                "wires": [
                    {
                        "id": "193e0cd8.65c7e3",
                        "port": 3
                    }
                ]
            }
        ],
        "inputLabels": [
            "[MQTT-in]"
        ],
        "outputLabels": [
            "Relay 1",
            "Relay 2",
            "Relay 3",
            "Relay 4"
        ]
    },
    {
        "id": "f6e14664.ebf688",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "ourshark.mysmarthome.vn",
        "port": "8097",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": ""
    },
    {
        "id": "e3ed5d37.01305",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "mqtt.mysmarthome.vn",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": ""
    },
    {
        "id": "f4134e17.6b60a",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0c9ec2",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#f3ba21",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#409fff",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#f3ba21",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#f3ba21",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#f7d16a",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#f3ba21",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            }
        },
        "site": {
            "name": "Chương trình dành cho nhà nông điều khiển thiết bị từ xa",
            "hideToolbar": "false",
            "allowSwipe": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 82,
                "sy": 82,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "294eb87b.b71b48",
        "type": "ui_tab",
        "z": "",
        "name": "Chương trình cảm biến nhiệt độ, độ ẩm",
        "icon": "dashboard",
        "order": 1
    },
    {
        "id": "62cc449d.959c9c",
        "type": "ui_group",
        "z": "",
        "name": "Biểu đồ 1",
        "tab": "c1299791.22deb8",
        "order": 1,
        "disp": true,
        "width": "4",
        "collapse": true
    },
    {
        "id": "2205c075.fa443",
        "type": "ui_group",
        "z": "",
        "name": "Test",
        "tab": "",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "52cad39c.c8472c",
        "type": "ui_group",
        "z": "",
        "name": "Cảm biến 1",
        "tab": "294eb87b.b71b48",
        "order": 1,
        "disp": true,
        "width": "4",
        "collapse": true
    },
    {
        "id": "769002c2.656e0c",
        "type": "mqtt-broker",
        "name": "",
        "broker": "mqtt.mysmarthome.vn",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": ""
    },
    {
        "id": "f21b3646.c69c48",
        "type": "ui_group",
        "z": "",
        "name": "Trạng thái kết nối",
        "tab": "294eb87b.b71b48",
        "order": 3,
        "disp": true,
        "width": "4",
        "collapse": false
    },
    {
        "id": "c29556ca.c0a148",
        "type": "mqtt-broker",
        "name": "",
        "broker": "mqtt.mysmarthome.vn",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": ""
    },
    {
        "id": "b4b399e4.880c88",
        "type": "mqtt-broker",
        "name": "",
        "broker": "mqtt.mysmarthome.vn",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": ""
    },
    {
        "id": "919a4e0f.8de0b",
        "type": "mqtt-broker",
        "name": "",
        "broker": "mqtt.mysmarthome.vn",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": ""
    },
    {
        "id": "c1299791.22deb8",
        "type": "ui_tab",
        "z": "",
        "name": "Biểu đồ",
        "icon": "dashboard",
        "order": 2
    },
    {
        "id": "1e920963.774b27",
        "type": "ui_tab",
        "name": "Tab 3",
        "icon": "dashboard",
        "order": 3
    },
    {
        "id": "53d24f24.3454e",
        "type": "ui_group",
        "z": "",
        "name": "Cảm biến 2",
        "tab": "294eb87b.b71b48",
        "order": 2,
        "disp": true,
        "width": "4",
        "collapse": false
    },
    {
        "id": "421e3387.3abaec",
        "type": "ui_group",
        "z": "",
        "name": "Biểu đồ 2",
        "tab": "c1299791.22deb8",
        "order": 2,
        "disp": true,
        "width": "4",
        "collapse": false
    },
    {
        "id": "24c6056f.a8c75a",
        "type": "ui_group",
        "z": "",
        "name": "Điều khiển",
        "tab": "294eb87b.b71b48",
        "order": 4,
        "disp": true,
        "width": "4",
        "collapse": false
    },
    {
        "id": "ed5ec385.d8a76",
        "type": "mqtt-broker",
        "name": "",
        "broker": "mqtt.mysmarthome.vn",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": ""
    },
    {
        "id": "55c9f618.907108",
        "type": "ui_tab",
        "name": "Tab 4",
        "icon": "dashboard",
        "order": 4
    },
    {
        "id": "d3888d72.ac84e",
        "type": "ui_group",
        "z": "",
        "name": "Điều khiển 2",
        "tab": "294eb87b.b71b48",
        "order": 5,
        "disp": true,
        "width": "4",
        "collapse": false
    },
    {
        "id": "a4ab8ad8.4a9368",
        "type": "ui_gauge",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "52cad39c.c8472c",
        "order": 2,
        "width": "2",
        "height": "2",
        "gtype": "donut",
        "title": "Độ ẩm",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#1f964f",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "70",
        "seg2": "85",
        "x": 773.0130615234375,
        "y": 1103.1773681640625,
        "wires": []
    },
    {
        "id": "fd95dcc.5815c2",
        "type": "json",
        "z": "45e7dc7b.259814",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 165,
        "y": 84,
        "wires": [
            [
                "8602a5ff.683428"
            ]
        ]
    },
    {
        "id": "af1d97.1a9de268",
        "type": "switch",
        "z": "45e7dc7b.259814",
        "name": "Phân luồn",
        "property": "relayId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 825.9869575500488,
        "y": 288.1562738418579,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "8c901ad9.e84448",
        "type": "function",
        "z": "45e7dc7b.259814",
        "name": "Chuỗi => Số",
        "func": "if (!msg.noInt)\n    msg.payload = parseInt(msg.payload, 10)\nelse\n    msg.payload = parseFloat(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 668.890625,
        "y": 305.335994720459,
        "wires": [
            []
        ]
    },
    {
        "id": "8602a5ff.683428",
        "type": "function",
        "z": "45e7dc7b.259814",
        "name": "Lặp",
        "func": "if (!msg.states) {\n    msg.states = msg.payload\n    msg.i = 0\n    return msg;\n} else {\n    msg.i++\n    if (msg.states[msg.i])\n        return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 327.89060974121094,
        "y": 83.33600330352783,
        "wires": [
            [
                "65fae34d.2947dc"
            ]
        ]
    },
    {
        "id": "65fae34d.2947dc",
        "type": "function",
        "z": "45e7dc7b.259814",
        "name": "Lấy trạng thái thiết bị",
        "func": "msg.relayId = msg.i\nmsg.payload = msg.states[msg.i].state\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 477.89060974121094,
        "y": 183.33600330352783,
        "wires": [
            [
                "8602a5ff.683428",
                "af1d97.1a9de268"
            ]
        ]
    },
    {
        "id": "e683e69c.345ef8",
        "type": "ui_chart",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "62cc449d.959c9c",
        "order": 2,
        "width": "0",
        "height": "0",
        "label": "Biểu đồ độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "bezier",
        "nodata": "Biểu đồ độ ẩm",
        "dot": false,
        "ymin": "60",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": true,
        "x": 798.27783203125,
        "y": 1067.666748046875,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "66e3ca76.3e6394",
        "type": "inject",
        "z": "6c281c8f.cbebc4",
        "name": "Kiểm tra cảm biến Online / 1 phút kiểm tra 1 lần",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 241.3888702392578,
        "y": 1253.4444580078125,
        "wires": [
            [
                "b9aea738.77d678"
            ]
        ]
    },
    {
        "id": "f9eb0636.3e2238",
        "type": "ui_text",
        "z": "6c281c8f.cbebc4",
        "group": "f21b3646.c69c48",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Trạng thái cảm biến 1",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1275.9444122314453,
        "y": 1253.3333835601807,
        "wires": []
    },
    {
        "id": "511f63ae.499f8c",
        "type": "json",
        "z": "5f4cdaf0.efb204",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 144,
        "y": 153,
        "wires": [
            [
                "72edfad1.fd7414"
            ]
        ]
    },
    {
        "id": "72edfad1.fd7414",
        "type": "switch",
        "z": "5f4cdaf0.efb204",
        "name": "Kiểm tra trạng thái",
        "property": "payload.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 306.00001525878906,
        "y": 153.9999542236328,
        "wires": [
            [
                "76c3aba3.f4f414"
            ],
            [
                "653af8c2.fb0428"
            ]
        ]
    },
    {
        "id": "76c3aba3.f4f414",
        "type": "change",
        "z": "5f4cdaf0.efb204",
        "name": "ONLINE",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ONLINE",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480.55554962158203,
        "y": 120.66659927368164,
        "wires": [
            []
        ]
    },
    {
        "id": "653af8c2.fb0428",
        "type": "change",
        "z": "5f4cdaf0.efb204",
        "name": "OFFLINE",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFFLINE",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480.1666564941406,
        "y": 180.7777099609375,
        "wires": [
            []
        ]
    },
    {
        "id": "aba2f0d2.f71b9",
        "type": "subflow:5f4cdaf0.efb204",
        "z": "6c281c8f.cbebc4",
        "x": 1007.9443511962891,
        "y": 1252.5556058883667,
        "wires": [
            [
                "f9eb0636.3e2238"
            ],
            [
                "f9eb0636.3e2238"
            ]
        ]
    },
    {
        "id": "9531cf86.f4999",
        "type": "subflow:45e7dc7b.259814",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "x": 886.111083984375,
        "y": 811.6666259765625,
        "wires": [
            [
                "f1df1842.3539d8"
            ],
            [
                "96fdbbf9.5ae108"
            ],
            [
                "978c4c06.1ecc7"
            ],
            [
                "276d8518.e5b85a"
            ],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "f1df1842.3539d8",
        "type": "ui_switch",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "label": "Quạt hút",
        "group": "24c6056f.a8c75a",
        "order": 1,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "1",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 1224.5,
        "y": 919.111083984375,
        "wires": [
            [
                "4ec9388f.77d358"
            ]
        ]
    },
    {
        "id": "96fdbbf9.5ae108",
        "type": "ui_switch",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "label": "Quạt thổi",
        "group": "24c6056f.a8c75a",
        "order": 2,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "2",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 1224.111099243164,
        "y": 967.6666240692139,
        "wires": [
            [
                "4ec9388f.77d358"
            ]
        ]
    },
    {
        "id": "978c4c06.1ecc7",
        "type": "ui_switch",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "label": "Đèn chiếu sáng nhà nấm",
        "group": "24c6056f.a8c75a",
        "order": 3,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "3",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 1274.111099243164,
        "y": 1012.6666240692139,
        "wires": [
            [
                "4ec9388f.77d358"
            ]
        ]
    },
    {
        "id": "276d8518.e5b85a",
        "type": "ui_switch",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "label": "Quạt hút gió thứ 2",
        "group": "24c6056f.a8c75a",
        "order": 4,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "4",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 1254.111099243164,
        "y": 1058.6666240692139,
        "wires": [
            [
                "4ec9388f.77d358"
            ]
        ]
    },
    {
        "id": "4ec9388f.77d358",
        "type": "switch",
        "z": "6c281c8f.cbebc4",
        "name": "Trước khi gửi lệnh",
        "property": "relayId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "null"
            },
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1537.8887023925781,
        "y": 998.6666259765625,
        "wires": [
            [
                "4789b4a2.1d289c"
            ],
            []
        ]
    },
    {
        "id": "4789b4a2.1d289c",
        "type": "function",
        "z": "6c281c8f.cbebc4",
        "name": "Chuẩn bị lệnh",
        "func": "msg.payload = {\n    id: parseInt(msg.topic, 10) - 1,\n    command: msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1784.0555458068848,
        "y": 966.5555553436279,
        "wires": [
            [
                "2782c06a.62757"
            ]
        ]
    },
    {
        "id": "88e0d9fd.2fb2f8",
        "type": "change",
        "z": "6c281c8f.cbebc4",
        "name": "Tắt",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFF",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "relayId",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 774,
        "y": 1141,
        "wires": [
            [
                "96fdbbf9.5ae108"
            ]
        ]
    },
    {
        "id": "384444fd.ef904c",
        "type": "change",
        "z": "6c281c8f.cbebc4",
        "name": "Bật",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ON",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "relayId",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 774.6111450195312,
        "y": 1178.111083984375,
        "wires": [
            [
                "96fdbbf9.5ae108"
            ]
        ]
    },
    {
        "id": "5f24de40.be38f",
        "type": "switch",
        "z": "856ec34.e149e4",
        "name": "Kiểm tra giá trị nhiệt độ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "32",
                "vt": "num"
            },
            {
                "t": "lte",
                "v": "30",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 842.284496307373,
        "y": 264.19786262512207,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "4f09c8ae.69f108",
        "type": "change",
        "z": "856ec34.e149e4",
        "name": "Đặt tiêu đề",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Nhiệt độ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 805.2844848632812,
        "y": 193.75341796875,
        "wires": [
            []
        ]
    },
    {
        "id": "76bc2bd.88594d4",
        "type": "change",
        "z": "6c281c8f.cbebc4",
        "name": "Tắt",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFF",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "relayId",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 804,
        "y": 981,
        "wires": [
            [
                "f1df1842.3539d8"
            ]
        ]
    },
    {
        "id": "c71c5604.5e9e88",
        "type": "change",
        "z": "6c281c8f.cbebc4",
        "name": "Bật",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ON",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "relayId",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 804.6111450195312,
        "y": 1019.111083984375,
        "wires": [
            [
                "f1df1842.3539d8"
            ]
        ]
    },
    {
        "id": "80ebb158.3e069",
        "type": "ui_gauge",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "52cad39c.c8472c",
        "order": 1,
        "width": "2",
        "height": "2",
        "gtype": "donut",
        "title": "Nhiệt độ",
        "label": "°C",
        "format": "{{value}}",
        "min": 0,
        "max": "55",
        "colors": [
            "#1f964f",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "30",
        "seg2": "40",
        "x": 812,
        "y": 943,
        "wires": []
    },
    {
        "id": "197272f6.a0403d",
        "type": "ui_chart",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "62cc449d.959c9c",
        "order": 1,
        "width": "0",
        "height": "0",
        "label": "Biểu đồ nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "bezier",
        "nodata": "Biểu đồ nhiệt độ",
        "dot": false,
        "ymin": "20",
        "ymax": "40",
        "removeOlder": "3",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": true,
        "x": 829.1734619140625,
        "y": 904.1978759765625,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "3150f278.1ef7be",
        "type": "subflow:856ec34.e149e4",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "x": 627,
        "y": 987.5,
        "wires": [
            [
                "197272f6.a0403d",
                "80ebb158.3e069"
            ],
            [
                "76bc2bd.88594d4"
            ],
            [
                "c71c5604.5e9e88"
            ]
        ]
    },
    {
        "id": "8f3ae8d2.d4cad8",
        "type": "switch",
        "z": "b88f92a1.61e8d",
        "name": "Kiểm tra giá trị độ ẩm",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "78",
                "vt": "num"
            },
            {
                "t": "lte",
                "v": "72",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 351,
        "y": 240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "ccf8a5dc.df2428",
        "type": "change",
        "z": "b88f92a1.61e8d",
        "name": "Đặt tiêu đề",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Độ ẩm",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 323.9999885559082,
        "y": 169.55555534362793,
        "wires": [
            []
        ]
    },
    {
        "id": "7bc41be0.065234",
        "type": "subflow:b88f92a1.61e8d",
        "z": "6c281c8f.cbebc4",
        "x": 614,
        "y": 1139.5,
        "wires": [
            [
                "e683e69c.345ef8",
                "a4ab8ad8.4a9368"
            ],
            [
                "88e0d9fd.2fb2f8"
            ],
            [
                "384444fd.ef904c"
            ]
        ]
    },
    {
        "id": "72c1709a.4c93d",
        "type": "function",
        "z": "856ec34.e149e4",
        "name": "Chuyển chuỗi ký tự thành số thực để so sánh và tính toán",
        "func": "msg.payload = parseFloat(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 387,
        "y": 144,
        "wires": [
            [
                "4f09c8ae.69f108",
                "5f24de40.be38f"
            ]
        ]
    },
    {
        "id": "3ab880e8.3d67c",
        "type": "json",
        "z": "9d7f68ce.7b1d68",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 164,
        "y": 136,
        "wires": [
            [
                "eaf91473.69caf8"
            ]
        ]
    },
    {
        "id": "8de4190e.32c538",
        "type": "switch",
        "z": "9d7f68ce.7b1d68",
        "name": "Phân luồn",
        "property": "relayId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 824.9869575500488,
        "y": 340.1562738418579,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "32744fbe.e15fe",
        "type": "function",
        "z": "9d7f68ce.7b1d68",
        "name": "Chuỗi => Số thực",
        "func": "msg.payload = parseFloat(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 634.8906326293945,
        "y": 333.335994720459,
        "wires": [
            [
                "8de4190e.32c538"
            ]
        ]
    },
    {
        "id": "eaf91473.69caf8",
        "type": "function",
        "z": "9d7f68ce.7b1d68",
        "name": "Lặp",
        "func": "if (!msg.states) {\n    msg.states = msg.payload\n    msg.i = 0\n    return msg;\n} else {\n    msg.i++\n    if (msg.states[msg.i])\n        return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 326.89060974121094,
        "y": 135.33600330352783,
        "wires": [
            [
                "80fb10d1.bdd75"
            ]
        ]
    },
    {
        "id": "80fb10d1.bdd75",
        "type": "function",
        "z": "9d7f68ce.7b1d68",
        "name": "Lấy trạng thái thiết bị",
        "func": "msg.relayId = msg.i\nmsg.payload = msg.states[msg.i].state\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 476.89060974121094,
        "y": 235.33600330352783,
        "wires": [
            [
                "eaf91473.69caf8",
                "32744fbe.e15fe"
            ]
        ]
    },
    {
        "id": "aa9151f4.8c948",
        "type": "subflow:9d7f68ce.7b1d68",
        "z": "6c281c8f.cbebc4",
        "x": 382.38888931274414,
        "y": 1029.8888969421387,
        "wires": [
            [
                "3150f278.1ef7be"
            ],
            [
                "7bc41be0.065234"
            ]
        ]
    },
    {
        "id": "65964eaa.27d2d",
        "type": "json",
        "z": "79f39b07.13eb74",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 178,
        "y": 114,
        "wires": [
            [
                "8afa0ec1.eff72"
            ]
        ]
    },
    {
        "id": "db408f9e.0a9f8",
        "type": "switch",
        "z": "79f39b07.13eb74",
        "name": "Phân luồn",
        "property": "relayId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 838.9869575500488,
        "y": 318.1562738418579,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "8afa0ec1.eff72",
        "type": "function",
        "z": "79f39b07.13eb74",
        "name": "Lặp",
        "func": "if (!msg.states) {\n    msg.states = msg.payload\n    msg.i = 0\n    return msg;\n} else {\n    msg.i++\n    if (msg.states[msg.i])\n        return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 340.89060974121094,
        "y": 113.33600330352783,
        "wires": [
            [
                "930c9ca0.3c21e"
            ]
        ]
    },
    {
        "id": "930c9ca0.3c21e",
        "type": "function",
        "z": "79f39b07.13eb74",
        "name": "Lấy trạng thái thiết bị",
        "func": "msg.relayId = msg.i\nmsg.payload = msg.states[msg.i].state\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490.89060974121094,
        "y": 213.33600330352783,
        "wires": [
            [
                "8afa0ec1.eff72",
                "db408f9e.0a9f8"
            ]
        ]
    },
    {
        "id": "84ba57cc.a11ea8",
        "type": "json",
        "z": "4bc2172f.ccf2f8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 214,
        "y": 180,
        "wires": [
            [
                "74b15e52.9938e"
            ]
        ]
    },
    {
        "id": "ed0d168.983e6e8",
        "type": "switch",
        "z": "4bc2172f.ccf2f8",
        "name": "Phân luồn",
        "property": "relayId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 874.9869575500488,
        "y": 384.1562738418579,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "74b15e52.9938e",
        "type": "function",
        "z": "4bc2172f.ccf2f8",
        "name": "Lặp",
        "func": "if (!msg.states) {\n    msg.states = msg.payload\n    msg.i = 0\n    return msg;\n} else {\n    msg.i++\n    if (msg.states[msg.i])\n        return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 376.89060974121094,
        "y": 179.33600330352783,
        "wires": [
            [
                "a9d9b786.07b3b8"
            ]
        ]
    },
    {
        "id": "a9d9b786.07b3b8",
        "type": "function",
        "z": "4bc2172f.ccf2f8",
        "name": "Lấy trạng thái thiết bị",
        "func": "msg.relayId = msg.i\nmsg.payload = msg.states[msg.i].state\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 526.8906097412109,
        "y": 279.33600330352783,
        "wires": [
            [
                "74b15e52.9938e",
                "ed0d168.983e6e8"
            ]
        ]
    },
    {
        "id": "4146a446.d2afbc",
        "type": "json",
        "z": "bf1112b5.a72e9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 183,
        "y": 100,
        "wires": [
            [
                "2fcf736a.b87c6c"
            ]
        ]
    },
    {
        "id": "193e0cd8.65c7e3",
        "type": "switch",
        "z": "bf1112b5.a72e9",
        "name": "Phân luồn",
        "property": "relayId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 843.9869575500488,
        "y": 304.1562738418579,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "2fcf736a.b87c6c",
        "type": "function",
        "z": "bf1112b5.a72e9",
        "name": "Lặp",
        "func": "if (!msg.states) {\n    msg.states = msg.payload\n    msg.i = 0\n    return msg;\n} else {\n    msg.i++\n    if (msg.states[msg.i])\n        return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 345.89060974121094,
        "y": 99.33600330352783,
        "wires": [
            [
                "8611e0de.9426"
            ]
        ]
    },
    {
        "id": "8611e0de.9426",
        "type": "function",
        "z": "bf1112b5.a72e9",
        "name": "Lấy trạng thái thiết bị",
        "func": "msg.relayId = msg.i\nmsg.payload = msg.states[msg.i].state\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 495.89060974121094,
        "y": 199.33600330352783,
        "wires": [
            [
                "2fcf736a.b87c6c",
                "193e0cd8.65c7e3"
            ]
        ]
    },
    {
        "id": "2cc27bf.a4b8484",
        "type": "subflow:9d7f68ce.7b1d68",
        "z": "6c281c8f.cbebc4",
        "x": 542.388858795166,
        "y": 1602.8888931274414,
        "wires": [
            [
                "5f56c066.b4139"
            ],
            [
                "5c1d65fe.0c0e2c"
            ]
        ]
    },
    {
        "id": "5f56c066.b4139",
        "type": "subflow:856ec34.e149e4",
        "z": "6c281c8f.cbebc4",
        "x": 821.3888664245605,
        "y": 1571.38889503479,
        "wires": [
            [
                "b350ab8a.c60aa8",
                "1d6b7f27.caac91"
            ],
            [],
            []
        ]
    },
    {
        "id": "5c1d65fe.0c0e2c",
        "type": "subflow:b88f92a1.61e8d",
        "z": "6c281c8f.cbebc4",
        "x": 813.3888664245605,
        "y": 1638.38889503479,
        "wires": [
            [
                "6086c58f.89a22c",
                "a94ad7fe.8b8e58"
            ],
            [],
            []
        ]
    },
    {
        "id": "cd9f7491.f547a8",
        "type": "subflow:79f39b07.13eb74",
        "z": "6c281c8f.cbebc4",
        "x": 510.388916015625,
        "y": 1743.8889427185059,
        "wires": [
            []
        ]
    },
    {
        "id": "1af3709c.ad5e3f",
        "type": "subflow:4bc2172f.ccf2f8",
        "z": "6c281c8f.cbebc4",
        "x": 538.388916015625,
        "y": 1805.722412109375,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "eda85747.018188",
        "type": "subflow:bf1112b5.a72e9",
        "z": "6c281c8f.cbebc4",
        "name": "admin",
        "x": 537.388916015625,
        "y": 1875.555528640747,
        "wires": [
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "21ee817b.001efe",
        "type": "mqtt in",
        "z": "6c281c8f.cbebc4",
        "name": "[MQTT-IN]Cảm biến nhiệt độ độ ẩm 1 (Nguồn 220V)",
        "topic": "request/3woMZkyAofg5drDEfgAICjhqApD3/BkCHBeriM/a8375454697c1853cf1d43140eb1da7f386333993564",
        "qos": "2",
        "broker": "919a4e0f.8de0b",
        "x": 235,
        "y": 961.3333215713501,
        "wires": [
            [
                "aa9151f4.8c948"
            ]
        ]
    },
    {
        "id": "b9aea738.77d678",
        "type": "http request",
        "z": "6c281c8f.cbebc4",
        "name": "[REST][GET]Cảm biến nhiệt độ độ ẩm 1 (Nguồn 220V)",
        "method": "GET",
        "ret": "txt",
        "url": "https://connect.mysmarthome.vn/api/1.0/request/3woMZkyAofg5drDEfgAICjhqApD3/BkCHBeriM/a8375454697c1853cf1d43140eb1da7f386333993564/req_device",
        "tls": "",
        "x": 647.0000228881836,
        "y": 1251.3333835601807,
        "wires": [
            [
                "aba2f0d2.f71b9"
            ]
        ]
    },
    {
        "id": "2782c06a.62757",
        "type": "http request",
        "z": "6c281c8f.cbebc4",
        "name": "[REST][POST]Phòng bếp",
        "method": "POST",
        "ret": "txt",
        "url": "https://connect.mysmarthome.vn/api/1.0/request/3woMZkyAofg5drDEfgAICjhqApD3/H1Tijbqx7/ebe2989fefa2459cd8a737a45d2b0d24261404526905/req_device_toggle",
        "tls": "",
        "x": 2006.0000686645508,
        "y": 966.3333606719971,
        "wires": [
            []
        ]
    },
    {
        "id": "74c0eadb.c731f4",
        "type": "mqtt in",
        "z": "6c281c8f.cbebc4",
        "name": "[MQTT-IN]Cảm biến nhiệt độ độ ẩm 2",
        "topic": "request/3woMZkyAofg5drDEfgAICjhqApD3/ryDNejf9M/94ff6ed1aa15cf81cac62eb679aba643498782457865",
        "qos": "2",
        "broker": "919a4e0f.8de0b",
        "x": 351.99997329711914,
        "y": 1543.3332977294922,
        "wires": [
            [
                "2cc27bf.a4b8484"
            ]
        ]
    },
    {
        "id": "4e0617f6.e14088",
        "type": "http request",
        "z": "6c281c8f.cbebc4",
        "name": "[REST][GET]Cảm biến nhiệt độ độ ẩm 2",
        "method": "GET",
        "ret": "txt",
        "url": "https://connect.mysmarthome.vn/api/1.0/request/3woMZkyAofg5drDEfgAICjhqApD3/ryDNejf9M/94ff6ed1aa15cf81cac62eb679aba643498782457865/req_device_toggle",
        "tls": "",
        "x": 634.000114440918,
        "y": 1315.333194732666,
        "wires": [
            [
                "a10b0a6.8e5b6f8"
            ]
        ]
    },
    {
        "id": "7c7d7ec7.0431b",
        "type": "inject",
        "z": "6c281c8f.cbebc4",
        "name": "Kiểm tra cảm biến Online / 1 phút kiểm tra 1 lần",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 246,
        "y": 1314.6666259765625,
        "wires": [
            [
                "4e0617f6.e14088"
            ]
        ]
    },
    {
        "id": "a10b0a6.8e5b6f8",
        "type": "subflow:5f4cdaf0.efb204",
        "z": "6c281c8f.cbebc4",
        "x": 1012.5554809570312,
        "y": 1313.7777738571167,
        "wires": [
            [
                "f5338fa8.7780c"
            ],
            [
                "f5338fa8.7780c"
            ]
        ]
    },
    {
        "id": "f5338fa8.7780c",
        "type": "ui_text",
        "z": "6c281c8f.cbebc4",
        "group": "f21b3646.c69c48",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Trạng thái cảm biến 2",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1280.5555419921875,
        "y": 1314.5555515289307,
        "wires": []
    },
    {
        "id": "1d6b7f27.caac91",
        "type": "ui_gauge",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "53d24f24.3454e",
        "order": 1,
        "width": "2",
        "height": "2",
        "gtype": "donut",
        "title": "Nhiệt độ",
        "label": "°C",
        "format": "{{value}}",
        "min": 0,
        "max": "55",
        "colors": [
            "#1f964f",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "30",
        "seg2": "40",
        "x": 1067.5555152893066,
        "y": 1514.3333683013916,
        "wires": []
    },
    {
        "id": "b350ab8a.c60aa8",
        "type": "ui_chart",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "421e3387.3abaec",
        "order": 1,
        "width": "0",
        "height": "0",
        "label": "Biểu đồ nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "bezier",
        "nodata": "Biểu đồ nhiệt độ",
        "dot": false,
        "ymin": "20",
        "ymax": "40",
        "removeOlder": "3",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": true,
        "x": 1084.7289772033691,
        "y": 1475.531244277954,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "6086c58f.89a22c",
        "type": "ui_chart",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "421e3387.3abaec",
        "order": 2,
        "width": "0",
        "height": "0",
        "label": "Biểu đồ độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "bezier",
        "nodata": "Biểu đồ độ ẩm",
        "dot": false,
        "ymin": "60",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": true,
        "x": 1078.8333015441895,
        "y": 1634.000114440918,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "a94ad7fe.8b8e58",
        "type": "ui_gauge",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "53d24f24.3454e",
        "order": 2,
        "width": "2",
        "height": "2",
        "gtype": "donut",
        "title": "Độ ẩm",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#1f964f",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "70",
        "seg2": "85",
        "x": 1053.568531036377,
        "y": 1669.5107345581055,
        "wires": []
    },
    {
        "id": "c694b822.532ee8",
        "type": "mqtt in",
        "z": "6c281c8f.cbebc4",
        "name": "[MQTT-IN]Phòng bếp",
        "topic": "request/3woMZkyAofg5drDEfgAICjhqApD3/H1Tijbqx7/ebe2989fefa2459cd8a737a45d2b0d24261404526905",
        "qos": "2",
        "broker": "ed5ec385.d8a76",
        "x": 622.0130004882812,
        "y": 821.6770915985107,
        "wires": [
            [
                "9531cf86.f4999"
            ]
        ]
    },
    {
        "id": "f7983232.d4a6e",
        "type": "inject",
        "z": "6c281c8f.cbebc4",
        "name": "Kiểm tra thiết bị Online / 1 phút kiểm tra 1 lần",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 382.6796875,
        "y": 1367.677001953125,
        "wires": [
            [
                "d3313170.dccaf"
            ]
        ]
    },
    {
        "id": "d3313170.dccaf",
        "type": "http request",
        "z": "6c281c8f.cbebc4",
        "name": "[REST][GET]Phòng bếp",
        "method": "GET",
        "ret": "txt",
        "url": "https://connect.mysmarthome.vn/api/1.0/request/3woMZkyAofg5drDEfgAICjhqApD3/H1Tijbqx7/ebe2989fefa2459cd8a737a45d2b0d24261404526905/req_device",
        "tls": "",
        "x": 752.3038864135742,
        "y": 1360.5762977600098,
        "wires": [
            [
                "f64ca6d8.6c9978"
            ]
        ]
    },
    {
        "id": "f64ca6d8.6c9978",
        "type": "subflow:5f4cdaf0.efb204",
        "z": "6c281c8f.cbebc4",
        "x": 1042.2352447509766,
        "y": 1367.7881469726562,
        "wires": [
            [
                "b522772c.a4fdc8"
            ],
            [
                "b522772c.a4fdc8"
            ]
        ]
    },
    {
        "id": "b522772c.a4fdc8",
        "type": "ui_text",
        "z": "6c281c8f.cbebc4",
        "group": "f21b3646.c69c48",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Trạng thái thiết bị relay F4 (1)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1377.2352447509766,
        "y": 1367.56591796875,
        "wires": []
    },
    {
        "id": "d3b47e53.aa81c",
        "type": "ui_button",
        "z": "6c281c8f.cbebc4",
        "name": "",
        "group": "f21b3646.c69c48",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Kiểm tra kết nối",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 242.26300048828125,
        "y": 1437.2525939941406,
        "wires": [
            [
                "b9aea738.77d678",
                "4e0617f6.e14088",
                "d3313170.dccaf"
            ]
        ]
    },
    {
        "id": "893a8dee.e17aa",
        "type": "switch",
        "z": "8322599d.1d7f58",
        "name": "Trước khi gửi lệnh",
        "property": "relayId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "null"
            },
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1072.8756713867188,
        "y": 343.0104064941406,
        "wires": [
            [
                "e35f1b0d.2f6838"
            ],
            []
        ]
    },
    {
        "id": "e35f1b0d.2f6838",
        "type": "function",
        "z": "8322599d.1d7f58",
        "name": "Chuẩn bị lệnh",
        "func": "msg.payload = {\n    id: parseInt(msg.topic, 10) - 1,\n    command: msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1319.0425148010254,
        "y": 310.89933586120605,
        "wires": [
            [
                "7efc1090.2e71b"
            ]
        ]
    },
    {
        "id": "7efc1090.2e71b",
        "type": "http request",
        "z": "8322599d.1d7f58",
        "name": "[REST][POST]Phòng bếp",
        "method": "POST",
        "ret": "txt",
        "url": "https://connect.mysmarthome.vn/api/1.0/request/3woMZkyAofg5drDEfgAICjhqApD3/H1Tijbqx7/ebe2989fefa2459cd8a737a45d2b0d24261404526905/req_device_toggle",
        "tls": "",
        "x": 1540.9870376586914,
        "y": 310.6771411895752,
        "wires": [
            []
        ]
    },
    {
        "id": "7ef47821.f261f8",
        "type": "ui_switch",
        "z": "8322599d.1d7f58",
        "name": "",
        "label": "Quạt hút",
        "group": "d3888d72.ac84e",
        "order": 1,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "1",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 759.4869689941406,
        "y": 263.4548645019531,
        "wires": [
            [
                "893a8dee.e17aa"
            ]
        ]
    },
    {
        "id": "83f222ea.57a51",
        "type": "ui_switch",
        "z": "8322599d.1d7f58",
        "name": "",
        "label": "Quạt thổi",
        "group": "d3888d72.ac84e",
        "order": 2,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "2",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 759.0980682373047,
        "y": 312.010404586792,
        "wires": [
            [
                "893a8dee.e17aa"
            ]
        ]
    },
    {
        "id": "5fabd52f.8ae7dc",
        "type": "ui_switch",
        "z": "8322599d.1d7f58",
        "name": "",
        "label": "Đèn chiếu sáng nhà nấm",
        "group": "d3888d72.ac84e",
        "order": 3,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "3",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 809.0980682373047,
        "y": 357.010404586792,
        "wires": [
            [
                "893a8dee.e17aa"
            ]
        ]
    },
    {
        "id": "6d1aa1a.6ca096",
        "type": "ui_switch",
        "z": "8322599d.1d7f58",
        "name": "",
        "label": "Quạt hút gió thứ 2",
        "group": "d3888d72.ac84e",
        "order": 4,
        "width": "2",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "4",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 789.0980682373047,
        "y": 403.010404586792,
        "wires": [
            [
                "893a8dee.e17aa"
            ]
        ]
    },
    {
        "id": "5c12e472.d0f3ac",
        "type": "subflow:45e7dc7b.259814",
        "z": "8322599d.1d7f58",
        "name": "",
        "x": 421.0980529785156,
        "y": 156.01040649414062,
        "wires": [
            [
                "7ef47821.f261f8"
            ],
            [
                "83f222ea.57a51"
            ],
            [
                "5fabd52f.8ae7dc"
            ],
            [
                "6d1aa1a.6ca096"
            ],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "35ecb228.067dce",
        "type": "mqtt in",
        "z": "8322599d.1d7f58",
        "name": "[MQTT-IN]Phòng bếp",
        "topic": "request/3woMZkyAofg5drDEfgAICjhqApD3/H1Tijbqx7/ebe2989fefa2459cd8a737a45d2b0d24261404526905",
        "qos": "2",
        "broker": "ed5ec385.d8a76",
        "x": 156.99996948242188,
        "y": 166.02087211608887,
        "wires": [
            [
                "5c12e472.d0f3ac"
            ]
        ]
    },
    {
        "id": "63a664a8.8def4c",
        "type": "ui_text",
        "z": "8322599d.1d7f58",
        "group": "f21b3646.c69c48",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Trạng thái thiết bị relay F4 (2)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1283.5555267333984,
        "y": 476.0104064941406,
        "wires": []
    },
    {
        "id": "e1571a28.fabf48",
        "type": "subflow:5f4cdaf0.efb204",
        "z": "8322599d.1d7f58",
        "x": 948.5555267333984,
        "y": 476.2326354980469,
        "wires": [
            [
                "63a664a8.8def4c"
            ],
            [
                "63a664a8.8def4c"
            ]
        ]
    },
    {
        "id": "a709c1a3.8573e",
        "type": "http request",
        "z": "8322599d.1d7f58",
        "name": "[REST][GET]Phòng bếp",
        "method": "GET",
        "ret": "txt",
        "url": "https://connect.mysmarthome.vn/api/1.0/request/3woMZkyAofg5drDEfgAICjhqApD3/H1Tijbqx7/ebe2989fefa2459cd8a737a45d2b0d24261404526905/req_device",
        "tls": "",
        "x": 658.6241683959961,
        "y": 469.0207862854004,
        "wires": [
            [
                "e1571a28.fabf48"
            ]
        ]
    },
    {
        "id": "bac7cc62.7d1f7",
        "type": "inject",
        "z": "8322599d.1d7f58",
        "name": "Kiểm tra thiết bị Online / 1 phút kiểm tra 1 lần",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 288.9999694824219,
        "y": 476.1214904785156,
        "wires": [
            [
                "a709c1a3.8573e"
            ]
        ]
    }
]